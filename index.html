<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surprise buat Sayang ‚ù§Ô∏è</title>
    <style>
        :root { --pink: #ff85a1; --white: #ffffff; }
        body {
            margin: 0; padding: 0; font-family: 'Arial', sans-serif;
            background-image: url('https://raw.githubusercontent.com/tampubolonrenhard22-sys/surprise/f2e29e6e8f633ddcd341a06c4d1b49355e26a603/valentine.jpeg');
            background-size: cover; background-position: center; background-attachment: fixed;
            display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden;
            position: relative;
        }
        .hidden { display: none !important; }

        /* ANIMASI TEKS POP-BOUNCE */
        @keyframes popBounce {
            0% { opacity: 0; transform: scale(0.5); }
            70% { transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }
        .animate-in { animation: popBounce 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

        .container {
            text-align: center; width: 90%; max-width: 400px; z-index: 20;
            background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(10px);
            padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            opacity: 0;
        }
        #section1.container { background: transparent; box-shadow: none; backdrop-filter: none; opacity: 1; }

        /* GELEMBUNG TEBAL & BESAR BEBAS ARAH */
        .bubble-container { position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; z-index: 1; overflow: hidden; }
        .bubble {
            position: absolute; bottom: -100px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border: 2.5px solid rgba(255, 255, 255, 0.8); 
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.5);
            animation: floatRandom linear infinite;
        }
        @keyframes floatRandom {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            25% { transform: translate(var(--x1), -30vh) rotate(90deg); }
            50% { transform: translate(var(--x2), -60vh) rotate(180deg); }
            75% { transform: translate(var(--x3), -90vh) rotate(270deg); }
            100% { transform: translate(var(--x4), -130vh) rotate(360deg); opacity: 0; }
        }

        /* AMPLOP ANIMASI */
        .envelope-wrapper { cursor: pointer; position: relative; width: 220px; height: 160px; background: var(--pink); margin: 0 auto; border-radius: 0 0 10px 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        .envelope-wrapper::before { content: ''; position: absolute; top: 0; left: 0; border-left: 110px solid transparent; border-right: 110px solid transparent; border-top: 100px solid var(--white); transition: 0.6s; transform-origin: top; z-index: 3; }
        .open-btn { position: absolute; top: 60%; left: 50%; transform: translate(-50%, -50%); background: white; color: var(--pink); padding: 8px 20px; border-radius: 20px; font-weight: bold; z-index: 4; border: 2px solid var(--pink); }
        .envelope-wrapper.opened::before { transform: rotateX(180deg); z-index: 1; }
        .letter { position: absolute; top: 10%; left: 10%; width: 80%; height: 80%; background: white; transition: 0.8s; z-index: 2; display: flex; justify-content: center; align-items: center; font-weight: bold; color: var(--pink); border-radius: 5px; opacity: 0; }
        .envelope-wrapper.opened .letter { transform: translateY(-110px); opacity: 1; z-index: 5; }

        /* GRID PERMAINAN */
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 10px; }
        .card { aspect-ratio: 1/1; background: var(--pink); border-radius: 8px; display: flex; justify-content: center; align-items: center; font-size: 24px; cursor: pointer; color: transparent; transition: 0.3s; border: 2px solid white; }
        .card.open { color: var(--pink); background: white; transform: rotateY(180deg); }
        .card.matched { transform: scale(0); opacity: 0; pointer-events: none; transition: 0.6s; }

        img.gif { width: 100%; max-width: 250px; border-radius: 15px; margin-bottom: 10px; }
        input { width: 85%; padding: 12px; border-radius: 10px; border: 2px solid var(--pink); margin-bottom: 15px; text-align: center; font-size: 16px; outline: none; }
        button.confirm-btn { background: var(--pink); color: white; border: none; padding: 12px 30px; border-radius: 25px; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; }
        #typewriter { font-size: 16px; line-height: 1.6; color: #333; font-weight: bold; white-space: pre-wrap; text-align: left; }
    </style>
</head>
<body>

<audio id="bgMusic" loop>
    <source src="https://raw.githubusercontent.com/tampubolonrenhard22-sys/surprise/5c87fbb58802185149a796fcde5743cdfecc295c/lagu1.mpeg" type="audio/mpeg">
</audio>

<div class="bubble-container" id="bubbleContainer"></div>

<div id="section1" class="container">
    <div class="envelope-wrapper" id="envelope" onclick="openEnvelope()">
        <div class="open-btn">OPEN</div>
        <div class="letter">hai manis ‚ù§Ô∏è</div>
    </div>
</div>

<div id="section2" class="container hidden">
    <img src="https://raw.githubusercontent.com/tampubolonrenhard22-sys/surprise/afbf1262cf09884132dca9f42cb097906679c28b/soksoan.gif" class="gif">
    <h3 style="color: var(--pink); margin: 5px 0;">Cocokkan dulu Sayang ‚ù§Ô∏è</h3>
    <div class="grid" id="grid"></div>
</div>

<div id="section3" class="container hidden">
    <img src="https://raw.githubusercontent.com/tampubolonrenhard22-sys/surprise/afbf1262cf09884132dca9f42cb097906679c28b/ke3.gif" class="gif">
    <p style="font-weight: bold; color: #444;">Aku mau ngomong sesuatu buat kamuü§≠‚ù§Ô∏è</p>
</div>

<div id="section4" class="container hidden">
    <img src="https://raw.githubusercontent.com/tampubolonrenhard22-sys/surprise/afbf1262cf09884132dca9f42cb097906679c28b/ke4.gif" class="gif">
    <p style="font-weight: bold; color: #444;">Kamu tau ngga sekarang hari apa‚ù§Ô∏è?</p>
    <input type="text" id="answerInput" placeholder="Jawab di sini sayang..." autocomplete="off">
    <br>
    <button class="confirm-btn" onclick="processQuestion()">Konfirmasi</button>
</div>

<div id="section5" class="container hidden">
    <img src="https://raw.githubusercontent.com/tampubolonrenhard22-sys/surprise/8f0321c739b71da20828bfc60bf655214208ca36/berantam.gif" class="gif">
    <p style="font-size: 1.2rem; font-weight: bold; color: #d63031;">Salah sayang, sekarang itu hari valentine</p>
</div>

<div id="section6" class="container hidden">
    <img src="https://raw.githubusercontent.com/tampubolonrenhard22-sys/surprise/8f0321c739b71da20828bfc60bf655214208ca36/pelukk.gif" class="gif">
    <div id="typewriter"></div>
</div>

<script>
    const music = document.getElementById('bgMusic');

    function createBubbles() {
        const container = document.getElementById('bubbleContainer');
        for (let i = 0; i < 40; i++) {
            const bubble = document.createElement('div');
            bubble.classList.add('bubble');
            const size = Math.random() * 60 + 20 + 'px'; 
            bubble.style.width = size;
            bubble.style.height = size;
            bubble.style.left = Math.random() * 100 + '%';
            bubble.style.setProperty('--x1', (Math.random() * 150 - 75) + 'px');
            bubble.style.setProperty('--x2', (Math.random() * 150 - 75) + 'px');
            bubble.style.setProperty('--x3', (Math.random() * 150 - 75) + 'px');
            bubble.style.setProperty('--x4', (Math.random() * 150 - 75) + 'px');
            bubble.style.animationDuration = Math.random() * 10 + 10 + 's';
            bubble.style.animationDelay = Math.random() * 8 + 's';
            container.appendChild(bubble);
        }
    }
    createBubbles();

    function showSection(sectionId) {
        document.querySelectorAll('.container:not(#section1)').forEach(el => {
            el.classList.add('hidden');
            el.classList.remove('animate-in');
        });
        const target = document.getElementById(sectionId);
        target.classList.remove('hidden');
        void target.offsetWidth; 
        target.classList.add('animate-in');
    }

    // --- UPDATE: DURASI AMPLOP SEKARANG 2 DETIK ---
    function openEnvelope() {
        music.play();
        const env = document.getElementById('envelope');
        env.classList.add('opened');
        setTimeout(() => {
            document.getElementById('section1').classList.add('hidden');
            showSection('section2');
            initGame();
        }, 2000); // Pas 2 detik
    }

    const emojis = ['‚ù§Ô∏è', 'üíñ', 'üíù', 'üòç', 'üíì', 'üíò', '‚ù§Ô∏è', 'üíñ', 'üíù', 'üòç', 'üíì', 'üíò'];
    let selected = [];
    let matchedCount = 0;

    function initGame() {
        const grid = document.getElementById('grid');
        emojis.sort(() => Math.random() - 0.5).forEach(emoji => {
            const card = document.createElement('div');
            card.classList.add('card');
            card.innerHTML = emoji;
            card.dataset.emoji = emoji;
            card.onclick = () => flipCard(card);
            grid.appendChild(card);
        });
    }

    function flipCard(card) {
        if (selected.length < 2 && !card.classList.contains('open') && !card.classList.contains('matched')) {
            card.classList.add('open');
            selected.push(card);
            if (selected.length === 2) setTimeout(checkMatch, 600);
        }
    }

    function checkMatch() {
        if (selected[0].dataset.emoji === selected[1].dataset.emoji) {
            selected[0].classList.add('matched');
            selected[1].classList.add('matched');
            matchedCount += 2;
            if (matchedCount === emojis.length) setTimeout(showTransition1, 800);
        } else {
            selected[0].classList.remove('open');
            selected[1].classList.remove('open');
        }
        selected = [];
    }

    function showTransition1() {
        showSection('section3');
        setTimeout(() => showSection('section4'), 5000); 
    }

    function processQuestion() {
        showSection('section5');
        setTimeout(() => {
            showSection('section6');
            startTypewriter();
        }, 5000); 
    }

    function startTypewriter() {
        const text = "Selamat hari valentine sayangkuu, cantikku and semestakuu, makasih udah mau nemani hari hariku yang melelahkan hehehe jangan pernah berubah yaa, aku bangga punya kamu yang selalu ada buat aku, kamu wanita tercantikk yang pernah aku kenal, tetaplah bersamaku, aku mencintaimuuuü´∂üèªüíê‚ú®üíûü§èüèª";
        let i = 0;
        function type() {
            if (i < text.length) {
                document.getElementById('typewriter').innerHTML += text.charAt(i);
                i++;
                setTimeout(type, 80);
            }
        }
        type();
    }
</script>

</body>
</html>
